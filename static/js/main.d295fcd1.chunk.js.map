{"version":3,"sources":["atoms.ts","components/CreateTodo.tsx","components/CreateCategory.tsx","components/Todo.tsx","components/TodoList.tsx","App.tsx","index.tsx","theme.ts"],"names":["CATEGORIES_LOCAL_STORAGE_KEY","localStorageCategoriesData","localStorage","getItem","initalCategoriesState","JSON","parse","_categoriesState","atom","key","default","categoriesState","selector","get","set","newValue","setItem","stringify","TODOS_LOCAL_STORAGE_KEY","localStorageTodosData","initalTodosState","_todosState","todosState","todoFilterState","filteredTodoState","todos","filter","todo","category","Form","styled","form","Input","input","CreateTodo","setTodos","useSetRecoilState","categories","useRecoilValue","defaultCategory","selectedCategory","useForm","register","handleSubmit","setValue","onSubmit","id","Date","now","text","required","placeholder","NewCategoryForm","CreateCategory","mode","reset","setError","errors","formState","onValid","a","newCategoryName","message","pattern","value","Item","li","prop","theme","secondBgColor","Text","span","Button","button","Category","div","Todo","useRecoilState","setCategories","useState","isCreatingCategory","setIsCreatingCategory","index","findIndex","NEW_CATEGORY_KEY","changeCategory","changedTodo","slice","handleClickDelete","onCreateCategory","includes","Error","className","name","onChange","target","defaultValue","map","onClick","Container","List","ul","FilterContainer","Filter","select","TodoList","setFilter","GlobalStyle","createGlobalStyle","props","bgColor","darkTextColor","App","ReactDOM","render","StrictMode","secondAccentColor","primaryColor","whiteColor","accentColor","document","getElementById"],"mappings":"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","file":"static/js/main.d295fcd1.chunk.js","sourcesContent":["import { atom, selector } from 'recoil';\n\nexport type CATEGORY = string;\n\nconst CATEGORIES_LOCAL_STORAGE_KEY = 'categories';\nconst localStorageCategoriesData = localStorage.getItem(CATEGORIES_LOCAL_STORAGE_KEY);\nconst initalCategoriesState = localStorageCategoriesData\n  ? JSON.parse(localStorageCategoriesData)\n  : ['Todo', 'Doing', 'Done'];\n\nconst _categoriesState = atom<CATEGORY[]>({\n  key: 'categories',\n  default: initalCategoriesState,\n});\n\nexport const categoriesState = selector<CATEGORY[]>({\n  key: 'persistentCategories',\n  get: ({ get }) => {\n    return get(_categoriesState);\n  },\n  set: ({ set }, newValue) => {\n    set(_categoriesState, newValue);\n    localStorage.setItem(CATEGORIES_LOCAL_STORAGE_KEY, JSON.stringify(newValue));\n  },\n});\n\nexport interface ITodo {\n  text: string;\n  id: number;\n  category: CATEGORY;\n}\n\nconst TODOS_LOCAL_STORAGE_KEY = 'todo';\nconst localStorageTodosData = localStorage.getItem(TODOS_LOCAL_STORAGE_KEY);\nconst initalTodosState = localStorageTodosData ? JSON.parse(localStorageTodosData) : [];\n\nconst _todosState = atom<ITodo[]>({\n  key: 'todos',\n  default: initalTodosState,\n});\n\nexport const todosState = selector<ITodo[]>({\n  key: 'persistentTodos',\n  get: ({ get }) => {\n    return get(_todosState);\n  },\n  set: ({ set }, newValue) => {\n    set(_todosState, newValue);\n    localStorage.setItem(TODOS_LOCAL_STORAGE_KEY, JSON.stringify(newValue));\n  },\n});\n\nexport type FILTER = CATEGORY | 'ALL';\n\nexport const todoFilterState = atom<FILTER>({\n  key: 'todoFilter',\n  default: 'ALL',\n});\n\nexport const filteredTodoState = selector({\n  key: 'todoFiltered',\n  get: ({ get }) => {\n    const todos = get(_todosState);\n    const filter = get(todoFilterState);\n\n    if (filter === 'ALL') {\n      return todos;\n    } else {\n      return todos.filter((todo) => todo.category === filter);\n    }\n  },\n});\n","import { useForm } from 'react-hook-form';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport styled from 'styled-components';\nimport { todoFilterState, todosState, CATEGORY, categoriesState } from '../atoms';\n\nconst Form = styled.form`\n  display: flex;\n`;\nconst Input = styled.input`\n  flex-grow: 1;\n`;\ninterface IForm {\n  todo: string;\n}\nconst CreateTodo = () => {\n  const setTodos = useSetRecoilState(todosState);\n  const categories = useRecoilValue(categoriesState);\n  const filter = useRecoilValue(todoFilterState);\n\n  const defaultCategory = categories[0];\n  const selectedCategory: CATEGORY = filter === 'ALL' ? defaultCategory : filter;\n\n  const { register, handleSubmit, setValue } = useForm<IForm>();\n  const onValid = ({ todo }: IForm) => {\n    setTodos((todos) => [\n      ...todos,\n      {\n        id: Date.now(),\n        text: todo,\n        category: selectedCategory,\n      },\n    ]);\n\n    setValue('todo', '');\n  };\n\n  return (\n    <Form onSubmit={handleSubmit(onValid)}>\n      <Input {...register('todo', { required: 'Todo is empty' })} placeholder=\"Write a Todo\" />\n      <button>Add</button>\n    </Form>\n  );\n};\n\nexport default CreateTodo;\n","import { SubmitHandler, useForm } from 'react-hook-form';\nimport styled from 'styled-components';\nimport { CATEGORY } from '../atoms';\n\nconst NewCategoryForm = styled.form`\n  input {\n    width: 100%;\n    border: 0;\n  }\n`;\n\ninterface IForm {\n  newCategoryName: CATEGORY;\n}\n\ninterface CreateCategoryProps {\n  onSubmit: (newCategoryName: CATEGORY) => Promise<void>;\n}\n\nconst CreateCategory = ({ onSubmit }: CreateCategoryProps) => {\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setError,\n    formState: { errors },\n  } = useForm<IForm>({\n    mode: 'onChange',\n  });\n\n  const onValid: SubmitHandler<IForm> = async ({ newCategoryName }) => {\n    try {\n      await onSubmit(newCategoryName);\n      reset();\n    } catch (error: any) {\n      setError('newCategoryName', {\n        message: error.message,\n      });\n    }\n  };\n\n  return (\n    <>\n      <NewCategoryForm onSubmit={handleSubmit(onValid)}>\n        <input\n          {...register('newCategoryName', {\n            required: 'The field is empty',\n            pattern: {\n              value: /[^_].*/,\n              message: \"Category name can't be started with _\",\n            },\n          })}\n        />\n      </NewCategoryForm>\n      {errors?.newCategoryName?.message && <span>{errors.newCategoryName.message}</span>}\n    </>\n  );\n};\n\nexport default CreateCategory;\n","import React from 'react';\nimport { useState } from 'react';\nimport { useRecoilState } from 'recoil';\nimport styled from 'styled-components';\n\nimport { categoriesState, CATEGORY, ITodo, todosState } from '../atoms';\nimport CreateCategory from './CreateCategory';\n\nconst Item = styled.li`\n  background-color: ${(prop) => prop.theme.secondBgColor};\n  margin: 10px 0;\n  display: flex;\n`;\nconst Text = styled.span`\n  flex-grow: 1;\n  margin-left: 6px;\n`;\n\nconst Button = styled.button`\n  border: 0;\n  border-radius: 5px;\n  background-color: transparent;\n  padding: 2px 3px;\n\n  &:hover {\n    background-color: rgba(0, 255, 0, 0.5);\n  }\n`;\nconst Category = styled.div`\n  width: 80px;\n  & > * {\n    width: 100%;\n    border: 0;\n  }\n`;\n\nconst Todo = (todo: ITodo) => {\n  const [todos, setTodos] = useRecoilState(todosState);\n  const [categories, setCategories] = useRecoilState(categoriesState);\n\n  const [isCreatingCategory, setIsCreatingCategory] = useState(false);\n\n  const { category, text, id } = todo;\n  const index = todos.findIndex((todo) => todo.id === id);\n\n  const NEW_CATEGORY_KEY = '_new';\n\n  const changeCategory = (category: CATEGORY) => {\n    const changedTodo: ITodo = {\n      ...todo,\n      category: category,\n    };\n\n    setTodos([...todos.slice(0, index), changedTodo, ...todos.slice(index + 1)]);\n  };\n\n  const handleChange = ({ target: { value } }: React.ChangeEvent<HTMLSelectElement>) => {\n    if (value === NEW_CATEGORY_KEY) {\n      setIsCreatingCategory(true);\n    } else {\n      changeCategory(value as CATEGORY);\n    }\n  };\n\n  const handleClickDelete = async () => {\n    setTodos([...todos.slice(0, index), ...todos.slice(index + 1)]);\n  };\n\n  const onCreateCategory = async (newCategoryName: CATEGORY) => {\n    if (categories.includes(newCategoryName)) {\n      throw new Error('Category already exists');\n    } else {\n      changeCategory(newCategoryName);\n      setCategories((categories) => [...categories, newCategoryName]);\n      setIsCreatingCategory(false);\n    }\n  };\n\n  return (\n    <Item className={`${category}`}>\n      <Text>{text}</Text>\n      {isCreatingCategory ? (\n        <Category>\n          <CreateCategory onSubmit={onCreateCategory} />\n        </Category>\n      ) : (\n        <Category>\n          <select name=\"category\" onChange={handleChange} defaultValue={todo.category}>\n            {categories.map((category) => (\n              <option key={category} value={category}>\n                {category}\n              </option>\n            ))}\n            <option key={NEW_CATEGORY_KEY} value={NEW_CATEGORY_KEY}>\n              Create a new category...\n            </option>\n          </select>\n        </Category>\n      )}\n      <Button onClick={handleClickDelete}>&#128465;</Button>\n    </Item>\n  );\n};\n\nexport default Todo;\n","import { useRecoilState, useRecoilValue } from 'recoil';\nimport styled from 'styled-components';\nimport { categoriesState, FILTER, filteredTodoState, todoFilterState } from '../atoms';\nimport CreateTodo from './CreateTodo';\nimport Todo from './Todo';\n\nconst Container = styled.div`\n  margin: 10px auto;\n  max-width: 200px;\n  flex-flow: column;\n  align-items: center;\n`;\nconst List = styled.ul`\n  width: 100%;\n`;\nconst FilterContainer = styled.div`\n  margin: 10px 0;\n`;\nconst Filter = styled.select`\n  display: block;\n  margin: 0 auto;\n`;\n\nconst TodoList = () => {\n  const todos = useRecoilValue(filteredTodoState);\n  const categories = useRecoilValue(categoriesState);\n  const [filter, setFilter] = useRecoilState(todoFilterState);\n  const handleChange = ({ target: { value } }: React.ChangeEvent<HTMLSelectElement>) => {\n    setFilter(value as FILTER);\n  };\n\n  return (\n    <Container>\n      <CreateTodo />\n      <FilterContainer>\n        <Filter value={filter} onChange={handleChange}>\n          <option value=\"ALL\" key=\"ALL\">\n            All\n          </option>\n          {categories.map((category) => (\n            <option key={category} value={category}>\n              {category}\n            </option>\n          ))}\n        </Filter>\n      </FilterContainer>\n      <List>\n        {todos.map((todo) => (\n          <Todo key={todo.id} {...todo} />\n        ))}\n      </List>\n    </Container>\n  );\n};\n\nexport default TodoList;\n","import { createGlobalStyle } from 'styled-components';\n\nimport './index.css';\nimport TodoList from './components/TodoList';\n\nconst GlobalStyle = createGlobalStyle`\n\nbody {\n  background-color: ${(props) => props.theme.bgColor};\n  color:${(props) => props.theme.darkTextColor}\n}\n`;\n\nfunction App() {\n  return (\n    <>\n      <GlobalStyle />\n      <TodoList />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RecoilRoot } from 'recoil';\nimport { ThemeProvider } from 'styled-components';\n\nimport App from './App';\nimport { lightTheme } from './theme';\n\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot>\n      <ThemeProvider theme={lightTheme}>\n        <App />\n      </ThemeProvider>\n    </RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","import { DefaultTheme } from 'styled-components';\n\nexport const lightTheme: DefaultTheme = {\n  bgColor: 'rgba(189, 195, 199, 0.5)',\n  secondAccentColor: 'rgba(241, 196, 15, 0.5)',\n  secondBgColor: 'white',\n  primaryColor: '#e67e22',\n  whiteColor: 'white',\n  darkTextColor: '#2c3e50',\n  accentColor: '#e74c3c',\n};\n\nexport const darkTheme: DefaultTheme = {\n  bgColor: 'rgba(44, 62, 80,1.0)',\n  secondAccentColor: '',\n  secondBgColor: 'rgba(149, 165, 166,1.0)',\n  primaryColor: 'rgba(211, 84, 0,1.0)',\n  whiteColor: '#2c3e50',\n  darkTextColor: 'white',\n  accentColor: 'rgba(192, 57, 43,1.0)',\n};\n"],"sourceRoot":""}